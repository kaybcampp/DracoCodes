<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DracoCodes</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Inline CSS for hero background */
        .hero {
            background: url('/images/dracoCodesHome.png') no-repeat center center;
            background-size: cover;
        }

        .packages {
            padding: 50px 20px;
            text-align: center;
            background-color: #141414;
            color: #fff;
        }

        .packages h2 {
            margin-bottom: 30px;
            font-size: 28px;
            border-bottom: 2px solid #00ff00;
            display: inline-block;
            padding-bottom: 5px;
        }

        .packages-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .package-card {
            background-color: #1a1a1a;
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            width: 300px;
            text-align: left;
            color: #fff;
        }

        .package-card h3 {
            color: #00ff00;
            margin-bottom: 10px;
        }

        .package-card p {
            font-size: 14px;
            line-height: 1.6;
        }

        .package-card .btn {
            display: block;
            margin-top: 15px;
            text-align: center;
            background-color: #00ff00;
            color: #0d0d0d;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .package-card .btn:hover {
            background-color: #00cc00;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <h1>Draco<span>Codes</span></h1>
        </div>
        <nav class="nav">
            <ul>
                <li><a href="project.html">Projects</a></li>
                <li><a href="#developer">Our Developer</a></li>
                <li><a href="#about">About Us</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-text">
            <h2>Custom Websites & Applications, Built for You</h2>
            <p>Quality and speed combined. Let DracoCodes bring your vision to life.</p>
            <button id="toggle-chat" class="btn">Create your Project</button>
        </div>
    </section>

    <section id="services" class="services">
        <h2>Our Services</h2>
        <div class="service-list">
            <div class="service-item">
                <h3>Custom Websites</h3>
                <p>Responsive, sleek, and tailored to your brand.</p>
            </div>
            <div class="service-item">
                <h3>Application Development</h3>
                <p>From simple tools to complex systems, we've got you covered.</p>
            </div>
            <div class="service-item">
                <h3>Interactive Solutions</h3>
                <p>AI-driven chats, dynamic forms, and more.</p>
            </div>
        </div>
    </section>

    <section class="packages">
        <h2>Coding Packages</h2>
        <div class="packages-grid">
            <div class="package-card">
                <h3>Basic Package</h3>
                <p>Perfect for small projects or one-page designs with basic functionality. Includes 3 revisions.</p>
                <a href="#" class="btn">Learn More</a>
            </div>
            <div class="package-card">
                <h3>Standard Package</h3>
                <p>Ideal for mid-sized projects. Includes up to 5 pages, advanced features, and 5 revisions.</p>
                <a href="#" class="btn">Learn More</a>
            </div>
            <div class="package-card">
                <h3>Premium Package</h3>
                <p>Comprehensive solutions for large-scale projects. Includes unlimited pages, premium features, and unlimited revisions.</p>
                <a href="#" class="btn">Learn More</a>
            </div>
        </div>
    </section>

    <section id="developer" class="developer">
        <h2>Our Developer</h2>
        <div class="developer-list">
            <div class="developer-item">
                <div class="developer-photo" style="background-image: url('/images/pfp2.png');"></div>
                <h3>Kayb C.</h3>
                <p>Full-Stack Developer</p>
            </div>
        </div>
        <div class="developer-btn-container">
            <a href="./project.html" class="btn">My Work</a>
        </div>
    </section>

    <section id="about" class="about">
        <h2>About DracoCodes</h2>
        <div class="about-container">
            <div class="about-text">
                <p><strong>DracoCodes</strong> is a part of the DracosTrapHouse (DTH) umbrella, delivering innovative and expert solutions for custom-built websites and applications. We pride ourselves on producing projects that blend speed, quality, and a deep understanding of client needs.</p>
                <p>Whether you're a startup or an established business, we’re here to help you build a digital presence that stands out and delivers exceptional results.</p>
            </div>
            <div class="about-image">
                <img src="/images/dthLaptop2.jpg" alt="About DracoCodes">
            </div>
        </div>
    </section>

    <div id="chat-container" class="chat-container">
        <div id="chat-header" class="chat-header">
            <div class="chat-logo">
                <img src="/images/mainLogo.png" alt="Chat Bot Logo" class="chat-logo-img">
            </div>
            <button id="close-chat" class="chat-close-btn">X</button>
        </div>
        <div id="chat-body" class="chat-body"></div>
        <div id="chat-footer" class="chat-footer">
            <input type="text" id="chat-input" placeholder="Type your message..." />
            <button id="send-chat" class="btn">Send</button>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2024 DracoCodes | Powered by DracosTrapHouse</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const chatContainer = document.getElementById("chat-container");
            const toggleChatBtn = document.getElementById("toggle-chat");
            const closeChatBtn = document.getElementById("close-chat");
            const sendChatBtn = document.getElementById("send-chat");
            const chatBody = document.getElementById("chat-body");
            const chatInput = document.getElementById("chat-input");

            const ngrokUrl = "https://fef9-151-197-215-174.ngrok-free.app"; // Replace with your ngrok URL

            let chatHistory = [];

            const sendWelcomeMessage = () => {
                const welcomeMessage =
                    "Welcome to DracoCodes! I’m here to help you with your custom project inquiries. Could you start by sharing what type of project you’d like us to build (e.g., website, bot, or application)?";
                addMessageToChat("DracoCodes AI", welcomeMessage);
            };

            const fetchBotResponse = async (userMessage) => {
                try {
                    const response = await fetch(`${ngrokUrl}/chat`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({ message: userMessage, chatHistory }),
                    });

                    const data = await response.json();
                    return data.response || "Sorry, something went wrong.";
                } catch (error) {
                    console.error("Error communicating with backend:", error);
                    return "Sorry, something went wrong. Please try again later.";
                }
            };

            const sendMessage = async () => {
                const userMessage = chatInput.value.trim();
                if (!userMessage) return;

                addMessageToChat("You", userMessage);
                chatHistory.push({ role: "user", content: userMessage });
                chatInput.value = "";

                const botResponse = await fetchBotResponse(userMessage);
                addMessageToChat("DracoCodes AI", botResponse);

                chatHistory.push({ role: "assistant", content: botResponse });
            };

            const addMessageToChat = (sender, message) => {
                const messageDiv = document.createElement("div");
                messageDiv.classList.add("chat-bubble", sender === "You" ? "user" : "bot");
                messageDiv.innerHTML = `<strong>${sender}:</strong> ${message}`;
                chatBody.appendChild(messageDiv);
                chatBody.scrollTop = chatBody.scrollHeight;
            };

            toggleChatBtn.addEventListener("click", () => {
                chatContainer.style.display = "flex";
                sendWelcomeMessage();
            });

            closeChatBtn.addEventListener("click", () => {
                chatContainer.style.display = "none";
                chatBody.innerHTML = "";
                chatHistory = [];
            });

            sendChatBtn.addEventListener("click", sendMessage);
            chatInput.addEventListener("keydown", (event) => {
                if (event.key === "Enter") {
                    event.preventDefault();
                    sendMessage();
                }
            });
        });
    </script>
</body>
</html>
